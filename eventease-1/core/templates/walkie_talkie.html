<!-- filepath: e:\Projects\EventEase\core\templates\walkie_talkie.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walkie Talkie</title>
    <script src="https://cdn.peerjs.com/1.3.1/peerjs.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #messages {
            border: 1px solid #ccc;
            padding: 10px;
            height: 300px;
            overflow-y: scroll;
            margin-bottom: 10px;
        }
        #messageInput {
            width: 80%;
        }
    </style>
</head>
<body>
    <h1>Walkie Talkie Communication</h1>
    <div id="messages"></div>
    <input type="text" id="messageInput" placeholder="Type your message here..." />
    <button id="sendButton">Send</button>

    <script>
        const peer = new Peer(); // Create a new PeerJS instance
        const messagesDiv = document.getElementById('messages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');

        peer.on('open', function(id) {
            console.log('My peer ID is: ' + id);
        });

        peer.on('connection', function(conn) {
            conn.on('data', function(data) {
                // Display the received message
                const messageElement = document.createElement('div');
                messageElement.textContent = data;
                messagesDiv.appendChild(messageElement);
            });
        });

        sendButton.addEventListener('click', function() {
            const message = messageInput.value;
            const conn = peer.connect('volunteer-peer-id'); // Replace with actual peer ID of the volunteer
            conn.on('open', function() {
                conn.send(message); // Send the message
                const messageElement = document.createElement('div');
                messageElement.textContent = 'Me: ' + message;
                messagesDiv.appendChild(messageElement);
                messageInput.value = ''; // Clear the input
            });
        });
    </script>
</body>
</html>